const d=/#/g,y=/&/g,L=/\//g,I=/=/g,T=/\?/g,i=/\+/g,N=/%5e/gi,w=/%60/gi,j=/%7c/gi,Q=/%20/gi,U=/%252f/gi;function p(e){return encodeURI(""+e).replace(j,"|")}function l(e){return p(typeof e=="string"?e:JSON.stringify(e)).replace(i,"%2B").replace(Q,"+").replace(d,"%23").replace(y,"%26").replace(w,"`").replace(N,"^").replace(L,"%2F")}function h(e){return l(e).replace(I,"%3D")}function $(e){return p(e).replace(d,"%23").replace(T,"%3F").replace(U,"%2F").replace(y,"%26").replace(i,"%2B")}function k(e){return $(e).replace(L,"%2F")}function a(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function b(e){return a(e.replace(i," "))}function H(e){return a(e.replace(i," "))}function W(e=""){const t={};e[0]==="?"&&(e=e.slice(1));for(const n of e.split("&")){const r=n.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const c=b(r[1]);if(c==="__proto__"||c==="constructor")continue;const o=H(r[2]||"");t[c]===void 0?t[c]=o:Array.isArray(t[c])?t[c].push(o):t[c]=[t[c],o]}return t}function v(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(n=>`${h(e)}=${l(n)}`).join("&"):`${h(e)}=${l(t)}`:h(e)}function x(e){return Object.keys(e).filter(t=>e[t]!==void 0).map(t=>v(t,e[t])).filter(Boolean).join("&")}const B=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,G=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,F=/^([/\\]\s*){2,}[^/\\]/,K=/^[\s\0]*(blob|data|javascript|vbscript):$/i,M=/\/$|\/\?|\/#/,D=/^\.?\//;function V(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?B.test(e):G.test(e)||(t.acceptRelative?F.test(e):!1)}function q(e){return!!e&&K.test(e)}function f(e="",t){return t?M.test(e):e.endsWith("/")}function X(e="",t){if(!t)return(f(e)?e.slice(0,-1):e)||"/";if(!f(e,!0))return e||"/";let n=e,r="";const c=e.indexOf("#");c>=0&&(n=e.slice(0,c),r=e.slice(c));const[o,...s]=n.split("?");return((o.endsWith("/")?o.slice(0,-1):o)||"/")+(s.length>0?`?${s.join("?")}`:"")+r}function u(e="",t){if(!t)return e.endsWith("/")?e:e+"/";if(f(e,!0))return e||"/";let n=e,r="";const c=e.indexOf("#");if(c>=0&&(n=e.slice(0,c),r=e.slice(c),!n))return r;const[o,...s]=n.split("?");return o+"/"+(s.length>0?`?${s.join("?")}`:"")+r}function J(e=""){return e.startsWith("/")}function g(e=""){return J(e)?e:"/"+e}function ee(e,t){if(z(t))return e;const n=X(t);if(!e.startsWith(n))return e;const r=e.slice(n.length);return r[0]==="/"?r:"/"+r}function te(e,t){const n=S(e),r={...W(n.search),...t};return n.search=x(r),Y(n)}function z(e){return!e||e==="/"}function Z(e){return e&&e!=="/"}function ne(e,...t){let n=e||"";for(const r of t.filter(c=>Z(c)))if(n){const c=r.replace(D,"");n=u(n)+c}else n=r;return n}function re(e,t,n={}){return n.trailingSlash||(e=u(e),t=u(t)),n.leadingSlash||(e=g(e),t=g(t)),n.encoding||(e=a(e),t=a(t)),e===t}const A=Symbol.for("ufo:protocolRelative");function S(e="",t){const n=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,_,E=""]=n;return{protocol:_.toLowerCase(),pathname:E,href:_+E,auth:"",host:"",search:"",hash:""}}if(!V(e,{acceptRelative:!0}))return t?S(t+e):m(e);const[,r="",c,o=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,s="",R=""]=o.match(/([^#/?]*)(.*)?/)||[],{pathname:C,search:P,hash:O}=m(R.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:r.toLowerCase(),auth:c?c.slice(0,Math.max(0,c.length-1)):"",host:s,pathname:C,search:P,hash:O,[A]:!r}}function m(e=""){const[t="",n="",r=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:n,hash:r}}function Y(e){const t=e.pathname||"",n=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",r=e.hash||"",c=e.auth?e.auth+"@":"",o=e.host||"";return(e.protocol||e[A]?(e.protocol||"")+"//":"")+c+o+t+n+r}export{g as a,$ as b,X as c,ee as d,k as e,re as f,V as h,q as i,ne as j,S as p,te as w};
